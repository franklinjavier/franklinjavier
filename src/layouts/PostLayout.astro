---
import BaseLayout from './BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import { getLangFromUrl, useTranslations } from '../i18n/utils';

interface Props {
  title: string;
  date: Date;
  description?: string;
}

const { title, date, description } = Astro.props;

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const dateLocale = lang === 'en' ? 'en-US' : 'pt-BR';
const homeUrl = lang === 'en' ? '/en/' : '/';

const formattedDate = new Intl.DateTimeFormat(dateLocale, {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
}).format(date);
---

<BaseLayout title={title} description={description}>
  <Navigation />

  <div class="pt-32 pb-20">
    <article class="max-w-3xl mx-auto px-8">
      <a href={homeUrl} class="inline-block mb-8 text-sm text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition">
        ‚Üê {t('nav.home')}
      </a>

      <header class="mb-12">
        <h1 class="text-5xl font-bold leading-tight mb-4">{title}</h1>
        <time class="text-sm text-gray-500 dark:text-gray-400">{formattedDate}</time>
      </header>

      <div class="prose prose-lg dark:prose-invert max-w-none
        prose-headings:font-bold
        prose-p:leading-relaxed
        prose-a:underline prose-a:decoration-1 prose-a:underline-offset-2
        prose-code:text-sm prose-code:font-mono
        prose-code:before:content-none prose-code:after:content-none
        prose-pre:rounded-lg prose-pre:shadow-lg
        prose-img:rounded-lg prose-img:shadow-lg">
        <slot />
      </div>
    </article>
  </div>
</BaseLayout>
